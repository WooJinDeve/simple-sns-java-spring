## 타임라인 최적화

### 타임라인이란?

- 트위터, 페이스북, 인스타그램 등 SNS에서 팔로워들의 게시물을 보여주는 피드

### 서비스가 커질 수록 느려지는 타임라인

- 시간 복잡도는 `log(Follow 전체 레코드) + 해당회원 Follwing * log(Post 전체레코드)`
- **Pan Out On Read (Pull Model)**
    - 사용자가 홈에 접속할때마다 이 시간 복잡도의 부하를 견뎌야한다.
    - 즉 팔로우 수가 많을 수록 기하급수적으로 시간이 오래걸리는 모델이다.

### Fan Out In Write

- 게시물 작성시, 해당 회원을 팔로우하는 회원들에게 데이터를 배달한다.
- 타임라인 조회시에는 `Timeline` 테이블을 조회하여 게시물을 조회한다.
- `Pull` 모델에서의 조회시점을 쓰기시점의 부하로 치환한다.
    - 팔로워들이 많은 사람들은 게시물 작성시 매우 큰 시간이 생긴다.

### 정합성과 성능

- `Push Model`은 공간복잡도를 희생, `Pull Model`은 시간 복잡도를 희생
    - `Pull Model`은 데이터의 정합성을 보장한다.
- `Push Model` 에서는 게시물 작성과 타임라인 배달의 정합성 보장에 대한 고민이 필요하다.
- **CAP 이론**